<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/assets/css/styles/variables.css">
    <link rel="stylesheet" href="/assets/css/styles/index.css">
    <link rel="stylesheet" href="/assets/css/styles/home.css">
    <title></title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/assets/css/highlight/styles/base16/dracula.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.css@7.4.5/themes/satellite-min.css" integrity="sha256-TehzF/2QvNKhGQrrNpoOb2Ck4iGZ1J/DI4pkd2oUsBc=" crossorigin="anonymous">
</head>

<body>
<div class="layout">
    <header class="header" id="header">
    <div class="header-content">
        <nav class="nav">
            <div class="header-menu hide-d">
                <a class="header-logo" href="/">
                    <img src="/../assets/images/logo.svg" alt="logo" />
                  </a>
                <button id="open-sidebar" class="icon menu-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg>
                    <span>Menu</span>
                </button>
            </div>


            <div class="header-search">
                <button aria-label="Open search" class="icon search-btn" id="search-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352c79.5 0 144-64.5 144-144s-64.5-144-144-144S64 128.5 64 208s64.5 144 144 144z"/></svg>
                    <span class="hidden search-text">Search the documentation</span>
                </button>
            </div>
        </nav>
    </div>
</header>

    <aside class="sidebar hidden" id="sidebar" data-pagefind-ignore>
    <div class="sidebar-logo">
      <a class="header-link" href="/">
          <img src="/../assets/images/logo.svg" alt="logo" />
      </a>
    </div>

    <section class="sidebar-container">
        <button class="close-btn icon" id="close-sidebar">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M376.6 84.5c11.3-13.6 9.5-33.8-4.1-45.1s-33.8-9.5-45.1 4.1L192 206 56.6 43.5C45.3 29.9 25.1 28.1 11.5 39.4S-3.9 70.9 7.4 84.5L150.3 256 7.4 427.5c-11.3 13.6-9.5 33.8 4.1 45.1s33.8 9.5 45.1-4.1L192 306 327.4 468.5c11.3 13.6 31.5 15.4 45.1 4.1s15.4-31.5 4.1-45.1L233.7 256 376.6 84.5z"/></svg>
            <span>Close</span>
        </button>
        <div class="sidebar-content">
            

            

            <ul class="nav-list" role="list">
            <li>
                <a href="/docs/readme/"></a>
            </li>
            <li>
                <a href="/docs/" class="active" >Getting Started Guide</a>
            </li>
            <li>
                <details
                    
                    
                >
                    <summary>Storage Adapter</summary>
                    <ul class="child-list" role="list">
            <li>
                <a href="/docs/amazon-documentdb-storage-adapter/">Amazon DocumentDB</a>
            </li></ul>
                </details>
            </li>
            
            <li>
                <details
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                >
                    <summary>Caching</summary>
                    <ul class="child-list" role="list">
            <li>
                <a href="/docs/caching-express/">Express</a>
            </li>
            <li>
                <a href="/docs/caching-fastify/">Fastify</a>
            </li>
            <li>
                <a href="/docs/caching-javascript/">Javascript</a>
            </li>
            <li>
                <a href="/docs/caching-koa/">Koa</a>
            </li>
            <li>
                <a href="/docs/caching-nestjs/">NestJS</a>
            </li>
            <li>
                <a href="/docs/caching-node/">NodeJs</a>
            </li></ul>
                </details>
            </li>
            </ul>

        </div>
    </section>
    <footer class="sidebar-footer">
        License MIT and Copyright Jared Wray 2023
    </footer>

</aside>

    <div class="main-container">
    <div class="main-content">
        <article class="content">
            <div class="items-start">
                
                <div class="breadcrumb">
                    
                    <a href="/docs/">Getting Started Guide</a>
                    
                    

                </div>
                

            </div>
            <h1>Getting Started Guide</h1>

            <!--   on this page start  -->
            <div class="on-page-container on-page-main">
                <h5>On this page</h5>
                <nav class="toc" >
        <ol><li><a href="#1.-make-a-project-directory">1. Make a Project Directory</a></li><li><a href="#2.-install-keyv">2. Install keyv</a></li><li><a href="#3.-create-a-new-keyv-instance">3. Create a New Keyv Instance</a></li><li><a href="#4.-create-some-key-value-pairs">4. Create Some Key Value Pairs</a></li><li><a href="#5.-advanced---use-namespaces-to-avoid-key-collisions">5. Advanced - Use Namespaces to Avoid Key Collisions</a></li><li><a href="#6.-advanced---enable-compression">6. Advanced - Enable Compression</a></li><li><a href="#7.-advanced---extend-your-own-module-with-keyv">7. Advanced - Extend your own Module with Keyv</a></li></ol>
      </nav>

            </div>

            <!--   on this page end  -->


            <h1 id="getting-started-guide" tabindex="-1">Getting Started Guide</h1>
<p>Keyv provides a consistent interface for key-value storage across multiple backends via storage adapters. It supports TTL based expiry, making it suitable as a cache or a persistent key-value store. Follow the steps below to get you up and running.</p>
<h2 id="1.-make-a-project-directory" tabindex="-1">1. Make a Project Directory</h2>
<p>Make a directory with your project in it.</p>
<pre><code class="language-sh">mkdir keyv
cd keyv
</code></pre>
<p>You’re now inside your project’s directory.</p>
<h2 id="2.-install-keyv" tabindex="-1">2. Install keyv</h2>
<pre><code class="language-sh">npm install --save keyv
</code></pre>
<p>By default, everything is stored in memory; you can optionally also install a storage adapter; choose one from the following:</p>
<pre><code class="language-sh">npm install --save @keyv/redis
npm install --save @keyv/mongo
npm install --save @keyv/sqlite
npm install --save @keyv/postgres
npm install --save @keyv/mysql
npm install --save @keyv/etcd
</code></pre>
<blockquote>
<p><strong>Note</strong>: You can also use third-party storage adapters</p>
</blockquote>
<p>The following are third-party storage adapters compatible with Keyv:</p>
<ul>
<li><a href="https://github.com/sindresorhus/quick-lru"><code>quick-lru</code></a> - Simple &quot;Least Recently Used&quot; (LRU) cache</li>
<li><a href="https://github.com/zaaack/keyv-file"><code>keyv-file</code></a> - File system storage adapter for Keyv</li>
<li><a href="https://www.npmjs.com/package/keyv-dynamodb"><code>keyv-dynamodb</code></a> - DynamoDB storage adapter for Keyv</li>
<li><a href="https://www.npmjs.com/package/keyv-lru"><code>keyv-lru</code></a> - LRU storage adapter for Keyv</li>
<li><a href="https://www.npmjs.com/package/keyv-null"><code>keyv-null</code></a> - Null storage adapter for Keyv</li>
<li><a href="https://github.com/goto-bus-stop/keyv-firestore"><code>keyv-firestore</code></a> – Firebase Cloud Firestore adapter for Keyv</li>
<li><a href="https://github.com/pmorgan3/keyv-mssql"><code>keyv-mssql</code></a> - Microsoft Sql Server adapter for Keyv</li>
<li><a href="https://github.com/howlowck/keyv-azuretable"><code>keyv-azuretable</code></a> - Azure Table Storage/API adapter for Keyv</li>
</ul>
<h2 id="3.-create-a-new-keyv-instance" tabindex="-1">3. Create a New Keyv Instance</h2>
<p>Pass your connection string if applicable. Keyv will automatically load the correct storage adapter. ////</p>
<pre><code class="language-js">// example Keyv instance that uses sqlite storage adapter
const keyv = new Keyv('sqlite://path/to/database.sqlite');
</code></pre>
<p><code>Keyv</code> Parameters</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>uri</td>
<td>String</td>
<td>N</td>
<td>The connection string URI. Merged into the options object as options.uri. Default value: undefined</td>
</tr>
<tr>
<td>options</td>
<td>Object</td>
<td>N</td>
<td>The options object is also passed through to the storage adapter. See the table below for a list of available options.</td>
</tr>
</tbody>
</table>
<p><code>options</code> Parameters</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>namespace</td>
<td>String</td>
<td>N</td>
<td>Namespace for the current instance.  Default: 'keyv'</td>
</tr>
<tr>
<td>ttl</td>
<td>Number</td>
<td>N</td>
<td>This is the default TTL, it can be overridden by specifying a TTL on .set().  Default: undefined</td>
</tr>
<tr>
<td>compression</td>
<td>@keyv/compress-&lt;compression_package_name&gt;</td>
<td>N</td>
<td>Compression package to use. See Compression for more details. Default: undefined.</td>
</tr>
<tr>
<td>serialize</td>
<td>Function</td>
<td>N</td>
<td>A custom serialization function. Default: JSONB.stringify</td>
</tr>
<tr>
<td>deserialize</td>
<td>Function</td>
<td>N</td>
<td>A custom deserialization function. Default: JSONB.parse</td>
</tr>
<tr>
<td>store</td>
<td>Storage adapter instance</td>
<td>N</td>
<td>The storage adapter instance to be used by Keyv. Default: new Map()</td>
</tr>
<tr>
<td>adapter</td>
<td>String</td>
<td>N</td>
<td>Specify an adapter to use. e.g 'redis' or 'mongodb'. Default: undefined</td>
</tr>
</tbody>
</table>
<h3 id="example---create-an-instance-of-keyv-with-a-connection-uri" tabindex="-1">Example - Create an Instance of Keyv with a connection URI</h3>
<p>The following example shows how you would create and Instance of Keyv with a <code>mongodb</code> connection URI.</p>
<pre><code class="language-js">const Keyv = require('keyv');

const keyv = new Keyv('mongodb://user:pass@localhost:27017/dbname');

// Handle DB connection errors
keyv.on('error', err =&gt; console.log('Connection Error', err));
</code></pre>
<h3 id="example---create-an-instance-of-keyv-using-a-third-party-storage-adapter" tabindex="-1">Example - Create an Instance of Keyv using a third-party storage adapter</h3>
<p><a href="https://github.com/sindresorhus/quick-lru"><code>quick-lru</code></a> is a third-party module that implements the Map API.</p>
<pre><code class="language-js">const Keyv = require('keyv');
const QuickLRU = require('quick-lru');

const lru = new QuickLRU({ maxSize: 1000 });
const keyv = new Keyv({ store: lru });

// Handle DB connection errors
keyv.on('error', err =&gt; console.log('Connection Error', err));
</code></pre>
<h2 id="4.-create-some-key-value-pairs" tabindex="-1">4. Create Some Key Value Pairs</h2>
<p>Method: <code>set(key, value, [ttl])</code> - Set a value for a specified key.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>key</td>
<td>String</td>
<td>Y</td>
<td>Unique identifier which is used to look up the value. Keys are persistent by default.</td>
</tr>
<tr>
<td>value</td>
<td>Any</td>
<td>Y</td>
<td>Data value associated with the key</td>
</tr>
<tr>
<td>ttl</td>
<td>Number</td>
<td>N</td>
<td>Expiry time in milliseconds</td>
</tr>
</tbody>
</table>
<p>The following example code shows you how to create a key-value pair using the <code>set</code> method.</p>
<pre><code class="language-js">
const keyv = new Keyv('redis://user:pass@localhost:6379');

// set a key value pair that expires in 1000 milliseconds
await keyv.set('foo', 'expires in 1 second', 1000); // true

// set a key value pair that never expires
await keyv.set('bar', 'never expires'); // true
</code></pre>
<p>Method: <code>delete(key)</code> - Deletes an entry.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>key</td>
<td>String</td>
<td>Y</td>
<td>Unique identifier which is used to look up the value. Returns <code>true </code>if the key existed, <code>false</code> if not.</td>
</tr>
</tbody>
</table>
<p>To delete a key value pair use the <code>delete(key)</code> method as shown below:</p>
<pre><code class="language-js">// Delete the key value pair for the 'foo' key
await keyv.delete('foo'); // true
</code></pre>
<h2 id="5.-advanced---use-namespaces-to-avoid-key-collisions" tabindex="-1">5. Advanced - Use Namespaces to Avoid Key Collisions</h2>
<p>You can namespace your Keyv instance to avoid key collisions and allow you to clear only a certain namespace while using the same database.</p>
<p>The example code below creates two namespaces, 'users' and 'cache' and creates a key value pair using the key 'foo' in both namespaces, it also shows how to delete all values in a specified namespace.</p>
<pre><code class="language-js">const users = new Keyv('redis://user:pass@localhost:6379', { namespace: 'users' });
const cache = new Keyv('redis://user:pass@localhost:6379', { namespace: 'cache' });

// Set a key-value pair using the key 'foo' in both namespaces
await users.set('foo', 'users'); // returns true
await cache.set('foo', 'cache'); // returns true

// Retrieve a Value
await users.get('foo'); // returns 'users'
await cache.get('foo'); // returns 'cache'

// Delete all values for the specified namespace
await users.clear();
</code></pre>
<h2 id="6.-advanced---enable-compression" tabindex="-1">6. Advanced - Enable Compression</h2>
<p>Keyv supports both <code>gzip</code> and <code>brotli</code> methods of compression. Before you can enable compression, you will need to install the compression package:</p>
<pre><code class="language-sh">npm install --save keyv @keyv/compress-gzip
</code></pre>
<h3 id="example---enable-gzip-compression" tabindex="-1">Example - Enable Gzip compression</h3>
<p>To enable compression, pass the <code>compression</code> option to the constructor.</p>
<pre><code class="language-js">const KeyvGzip = require('@keyv/compress-gzip');
const Keyv = require('keyv');

const keyvGzip = new KeyvGzip();
const keyv = new Keyv({ compression: KeyvGzip });
</code></pre>
<p>You can also pass a custom compression function to the compression option. Custom compression functions must follow the pattern of the official compression adapter (see below for further information).</p>
<h3 id="want-to-build-your-own%3F" tabindex="-1">Want to build your own?</h3>
<p>Great! Keyv is designed to be easily extended. You can build your own compression adapter by following the pattern of the official compression adapters based on this interface:</p>
<pre><code class="language-js">interface CompressionAdapter {
	async compress(value: any, options?: any);
	async decompress(value: any, options?: any);
	async serialize(value: any);
	async deserialize(value: any);
}
</code></pre>
<h4 id="test-your-custom-compression-adapter" tabindex="-1">Test your custom compression adapter</h4>
<p>In addition to the interface, you can test it with our compression test suite using <code>@keyv/test-suite</code>:</p>
<pre><code class="language-js">const {keyvCompresstionTests} = require('@keyv/test-suite');
const KeyvGzip = require('@keyv/compress-gzip');

keyvCompresstionTests(test, new KeyvGzip());
</code></pre>
<h2 id="7.-advanced---extend-your-own-module-with-keyv" tabindex="-1">7. Advanced - Extend your own Module with Keyv</h2>
<p>Keyv can be easily embedded into other modules to add cache support.</p>
<ul>
<li>Caching will work in memory by default, and users can also install a Keyv storage adapter and pass in a connection string or any other storage that implements the Map API.</li>
<li>You should also set a namespace for your module to safely call <code>.clear()</code> without clearing unrelated app data.</li>
</ul>
<blockquote>
<p><strong>Note</strong>:
The recommended pattern is to expose a cache option in your module's options which is passed through to Keyv.</p>
</blockquote>
<h3 id="example---add-cache-support-to-a-module" tabindex="-1">Example - Add Cache Support to a Module</h3>
<ol>
<li>Install whichever storage adapter you will be using, <code>keyv-redis</code> in this example</li>
</ol>
<pre><code class="language-sh">npm install --save keyv-redis
</code></pre>
<ol start="2">
<li>Declare the Module with the cache controlled by a Keyv instance</li>
</ol>
<pre><code class="language-js">class AwesomeModule {
	constructor(opts) {
		this.cache = new Keyv({
			uri: typeof opts.cache === 'string' &amp;&amp; opts.cache,
			store: typeof opts.cache !== 'string' &amp;&amp; opts.cache,
			namespace: 'awesome-module'  
		});
	}
}
</code></pre>
<ol start="3">
<li>Create an Instance of the Module with caching support</li>
</ol>
<pre><code class="language-js">const AwesomeModule = require('awesome-module');
const awesomeModule = new AwesomeModule({ cache: 'redis://localhost' });
</code></pre>


        </article>

        <div class="on-page-container on-page--desktop hidden" id="on-page">
            <div class="on-page-fixed">
                <h5>On this page</h5>
                <nav class="toc" >
        <ol><li><a href="#1.-make-a-project-directory">1. Make a Project Directory</a></li><li><a href="#2.-install-keyv">2. Install keyv</a></li><li><a href="#3.-create-a-new-keyv-instance">3. Create a New Keyv Instance</a></li><li><a href="#4.-create-some-key-value-pairs">4. Create Some Key Value Pairs</a></li><li><a href="#5.-advanced---use-namespaces-to-avoid-key-collisions">5. Advanced - Use Namespaces to Avoid Key Collisions</a></li><li><a href="#6.-advanced---enable-compression">6. Advanced - Enable Compression</a></li><li><a href="#7.-advanced---extend-your-own-module-with-keyv">7. Advanced - Extend your own Module with Keyv</a></li></ol>
      </nav>
            </div>
        </div>
    </div>
</div>

    <div class="search-modal" id="search-modal">
    <div class="search-container" id="search-container">
        <div id="search" class="search-box">
            <span class="close-modal-btn hide-d" id="close-modal-btn">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M376.6 84.5c11.3-13.6 9.5-33.8-4.1-45.1s-33.8-9.5-45.1 4.1L192 206 56.6 43.5C45.3 29.9 25.1 28.1 11.5 39.4S-3.9 70.9 7.4 84.5L150.3 256 7.4 427.5c-11.3 13.6-9.5 33.8 4.1 45.1s33.8 9.5 45.1-4.1L192 306 327.4 468.5c11.3 13.6 31.5 15.4 45.1 4.1s15.4-31.5 4.1-45.1L233.7 256 376.6 84.5z"/>
                </svg>
            </span>
        </div>
    </div>
</div>

</div>

<link href="/_pagefind/pagefind-ui.css" rel="stylesheet">
<script src="/_pagefind/pagefind-ui.js" type="text/javascript"></script>
<script>
  window.addEventListener('DOMContentLoaded', (event) => {
    new PagefindUI({
      element: "#search",
      showImages: false,
      debounceTimeoutMs: 500
    });
  });
</script>

<!--pagefind UI-->
<script>
  const searchModal = document.querySelector('#search-modal');
  const searchModalContainer = document.querySelector('#search-container');
  const closeModalBtn = document.querySelector('#close-modal-btn');
  const searchBtn = document.querySelector('#search-btn');

  const closeEmptyModal = (e) => {
    const pagefindInput = document.querySelector('.pagefind-ui__search-input');
    if(pagefindInput) {
      if(!pagefindInput.value ) {
        if (pagefindInput === e.target || pagefindInput.contains(e.target)) return;
        searchModal.classList.remove('show-modal');
      }
    }
  }

  const closeDesktopModal = (e) => {
    const pagefindInput = document.querySelector('.pagefind-ui__search-input');
    if(isDesktop && pagefindInput) {
      if(pagefindInput.value ) {
        if (searchModalContainer === e.target || searchModalContainer.contains(e.target)) return;
        searchModal.classList.remove('show-modal');
      }
    }
  }

  searchModal.addEventListener('click', (e) => {
    closeEmptyModal(e);
    closeDesktopModal(e)
  });

  const autofocusInput = () => {
    const pagefindInput = document.querySelector('.pagefind-ui__search-input');
    if (pagefindInput) {
      pagefindInput.focus();
    }
  };

  const handleSearchModal = () => {
    searchModal.classList.add('show-modal');
    autofocusInput()
  };
  searchBtn.addEventListener('click', handleSearchModal);


  if(closeModalBtn) {
    closeModalBtn.addEventListener('click', () => {
      searchModal.classList.remove('show-modal');
    });
  }


</script>

<script defer>
  const sidebar = document.querySelector('#sidebar');
  const header = document.querySelector('#header');
  const path = window.location.pathname;
  const isHome = path === '/' || path === '/index.html';
  const isDesktop  = window.innerWidth >= 992;

  const handleScroll = () => {
    const onPage = document.querySelector('#on-page');
    if(!isHome) {
      if (window.scrollY > 0 && window.innerWidth >= 1458) {
        onPage.classList.remove('hidden');
      } else {
        onPage.classList.add('hidden');
      }
    }
  };
  window.addEventListener('scroll', handleScroll);


  const  closeSidebar = () => {
    const closeBtn = document.querySelector('#close-sidebar');
    closeBtn.addEventListener('click', () => {
      sidebar.classList.add('hidden');
      header.classList.remove('bottom');
    });
  }

  const openSidebar = () => {
    const openBtn = document.querySelector('#open-sidebar');
    openBtn.addEventListener('click', () => {
      sidebar.classList.remove('hidden');
      header.classList.add('bottom');
    });
  }

  const handleMobileSidebar = () => {
    if (!isHome && !isDesktop) {
      openSidebar()
      closeSidebar();
    }
  }
  document.addEventListener('DOMContentLoaded', handleMobileSidebar, false)
</script>


<script src="/assets/css/highlight/highlight.min.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    hljs.highlightAll()
  });
</script>



</body>
</html>
